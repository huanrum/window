var react_addons_test_utils_1 = require('react-addons-test-utils');
var WhoToGreet_1 = require('../../src/components/WhoToGreet');
var GreetingActions = require('../../src/actions/GreetingActions');
describe('WhoToGreet', function () {
    var handleSelectionChangeSpy;
    beforeEach(function () {
        handleSelectionChangeSpy = jasmine.createSpy('handleSelectionChange');
    });
    it('given a newGreeting then it renders a form containing an input containing that text and an add button', function () {
        var newGreeting = 'James';
        var form = render({ newGreeting: newGreeting });
        expect(form.type).toBe('form');
        expect(form.props.role).toBe('form');
        var formGroup = form.props.children;
        expect(formGroup.type).toBe('div');
        expect(formGroup.props.className).toBe('form-group');
        var _a = formGroup.props.children, input = _a[0], button = _a[1];
        expect(input.type).toBe('input');
        expect(input.props.type).toBe('text');
        expect(input.props.className).toBe('form-control');
        expect(input.props.placeholder).toBe('Who would you like to greet?');
        expect(input.props.value).toBe(newGreeting);
        expect(button.type).toBe('button');
        expect(button.props.type).toBe('submit');
        expect(button.props.className).toBe('btn btn-default btn-primary');
        expect(button.props.disabled).toBe(false);
        expect(button.props.children).toBe('Add greeting');
    });
    it('input onChange triggers a newGreetingChanged action', function () {
        var newGreeting = 'Benjamin';
        var form = render({ newGreeting: newGreeting });
        var formGroup = form.props.children;
        var input = formGroup.props.children[0];
        spyOn(GreetingActions, 'newGreetingChanged');
        input.props.onChange({ target: { value: newGreeting } });
        expect(GreetingActions.newGreetingChanged).toHaveBeenCalledWith(newGreeting);
    });
    it('button onClick triggers an addGreeting action', function () {
        var newGreeting = 'Benjamin';
        var form = render({ newGreeting: newGreeting });
        var formGroup = form.props.children;
        var _a = formGroup.props.children, button = _a[1];
        spyOn(GreetingActions, 'addGreeting');
        button.props.onClick({ preventDefault: function () { } });
        expect(GreetingActions.addGreeting).toHaveBeenCalledWith(newGreeting);
    });
    function render(_a) {
        var newGreeting = _a.newGreeting;
        var shallowRenderer = react_addons_test_utils_1.default.createRenderer();
        shallowRenderer.render(<WhoToGreet_1.default newGreeting={newGreeting}/>);
        return shallowRenderer.getRenderOutput();
    }
});
//# sourceMappingURL=WhoToGreet.tests.js.map